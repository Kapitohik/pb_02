# Объектно-ориентированное программирование

### Внешняя декомпозиция

>  Внимание! Исходные тексты программ могут содержать любое количество ошибок, их поиск и исправление составляют часть упражнения.

## Краткие теоретические сведения

Внутренняя декомпозиция программы приводит к определению ряда абстракций, которые используются при решении прикладных задач.
Примерами являются различные варианты вычисления итоговой оценки, компоновка сведений о студенте в единую структуру и т.п.

Содержание абстракций в едином файле исходного текста быстро приводит к избыточному росту сложности и, кроме того, затрудняет или делает невозможной совместную работу нескольких программистов.

Язык C++ поддерживает механизм **раздельной компиляции**, который позволяет делить программу на **модули** --- отдельные файлы и компилировать эти файлы независимо от остальных частей программы.

Процесс декомпозиции единой программы на модули в дальнейшем называется **внешней декомпозицией**.

Поскольку компиляция фрагмента исходного текста требует доступа, как минимум, к **объявлению** имени абстракции (функции, структуры данных, классу и т.п.), используемой в данном фрагменте, модули традиционно состоят из двух файлов: файла реализации (расширение *.cpp), и заголовочного файла (расширение *.h или *.hpp).

В файле реализации находятся определения функций, в заголовочном файле --- объявления **экспортируемых модулем фукций** (не все функции модуля могут предназначаться для "внешнего" использования).

В данной работе функции и структура данных уже определены в исходном файле `mod.cpp`.
Файлы реализации модулей создаются за счет переноса определений в файлы реализации модулей.

Дополнительно, каждый модуль снабжается заголовком (заголовочным файлом), позволяющим использовать данный модуль в качестве составной части программы.


## Задание

1. Добавить к модулю student_info функцию печати итоговой оценки студента с параметрами `std::string` --- имя студента, `std::size_t` --- ширина колонки для имени и `double` --- итоговая оценка.
В качестве основы использовать фрагменты кода, находящиеся в функции main.

2. Добаваить к модулю student_info функцию печати сообщения об ошибке вычисления итоговой оценки студента с параметрами `std::string` --- имя студента, `std::size_t` --- ширина колонки для имени и `const char *` --- сообщение об ошибке.
В качестве основы использовать ранее написанную функцию печати итоговой оценки и фрагменты кода, находящиеся в функции `main`.

3. Добавить к модулю student_info функцию печтати имени студента с параметром `std::string` --- имя студента.

4. Экспортировать созданные функции из модуля `student_info`.

5. Переписать функцию `main` с использованием вновь созданных функций печати.
Создать коммит как первую контрольную точку лабораторной работы.

6. Добавить к модулю grade функцию-предикат `f_grade`, возвращающий `true` для студентов с итоговой оценкой меньше 6.0.

7. Добавить к модулю student_info функцию `extract_fails`, которая извлекает из исходного перечня (вектора) записи студентов, имеющих итоговую оценку меньше, чем 6.0.
Исходный перечень при этом должен модифицироваться: в нем должны остаться только записи для студентов, успешно завершивших курс.

> Рекомендуемая сигнатура функции `extract_fails`:
> `std::vector<Student_info> extract_fails(std::vector<Student_info>&)`.

8. Модифицировать основную функцию программы так, чтобы после упорядоченного списка студентов с указанием итогового балла печаталась строка "Неаттестованы:", отделенная пустой строкой от предыдущего текста, а после, также отделенный пустой строкой, --- список студентов с низким итоговым баллом.

9. После отладки нового варианта программы создать коммит как вторую контрольную точку лаборатоной работы.

10. Отправить изменения в персональный репозиторий, создать запрос на слияние.


Для тестирования программы используйте команду `cmake --build build --target test`.
Для каждой записи из файла `tests/studs.txt` должен выполняется расчет итоговой оценки.


## Запуск программы

Запуск выполняется стандартным способом, из терминала, открытого в папке проекта.

Название программы (`ch06`), определено в файле проекта CMakeLists.txt

`build/ch06`


## Инструментарий для сборки проекта

1. `cmake`
1. `make`
1. `g++ (gcc)`
1. `git`


## Настройка и сборка проекта

Настройка проекта (build --- название папки для артефактов сборки, можно выбирать произвольно):

`cmake -B build`

Сборка проекта:

`cmake --build build`
